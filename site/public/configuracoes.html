<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monitority | Configurações</title>

  <link rel="stylesheet" href="./css/telaCadastroFunc.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lykmapipo/themify-icons@0.1.2/css/themify-icons.css">
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.0/css/flag-icon.min.css">
  <link rel="icon" href="./assets/imgs/sobreNos.png">
  <link rel="stylesheet" href="./css/configs.css">
  <script src="./js/filtro_login.js"></script>
</head>

<body onload="dadosCliente(), navBar()">
        <!-- Div que contem a parte de navegação (parte verde do menu)-->
        <div class="navegacao">
          <ul class="navbar-nav">
              <li class="nav-item">
                  <!-- Foto De Perfil do USUARIO e o NOME do mesmo -->
                  <div class="fotoDePerfil">
                      <a href="#" class="nav-link">
                          <!-- imagem do ICONE DA FOTO DE PERFIL-->
                          <span class="icone"><i class="uil uil-user"></i> </span>
                          <span class="titulo"><span id="b_usuario">usuário</span></span>
                      </a>
                  </div>
              <li class="nav-item" id="nav_dashboard">
                  <a href="dashboard-tecnico.html" class="nav-link">
                      <!-- Imagem do ICONE DO planos-->
                      <span class="icone"> <i class="uil  uil-chart-line"></i> </span>
                      <span class="titulo"> Dashboard </span>
                  </a>
              </li>
              <li class="nav-item" id="nav_painel">
                  <a href="./dashboard-gerente.html" class="nav-link">
                      <!--Imagem do ICONE DE ADICIONAR -->
                      <span class="icone"> <i class="uil uil-bell"></i> </span>
                      <span class="titulo"> Painel</span>
                  </a>
              </li>
              <li class="nav-item" id="nav_ocorrencia">
                  <a href="ocorrencias.html" class="nav-link">
                      <!-- Imagem do ICONE DO planos-->
                      <span class="icone"> <i class="uil  uil-clipboard"></i> </span>
                      <span class="titulo"> Ocorrências </span>
                  </a>
              </li>
              <li class="nav-item" id="nav_estabelecimento">
                  <a href="./telaCadastroEstabelecimento.html" class="nav-link">
                      <!--Imagem do ICONE DE ADICIONAR -->
                      <span class="icone"> <i class="uil uil-estate"></i> </span>
                      <span class="titulo"> Estabelecimento</span>
                  </a>
              </li>
              <li class="nav-item" id="nav_totem">
                  <a href="./telaCadastroTotem.html" class="nav-link">
                      <!--Imagem do ICONE DE ADICIONAR -->
                      <span class="icone"> <i class="uil uil-server-connection"></i> </span>
                      <span class="titulo"> Cadastrar Totem</span>
                  </a>
              </li>
              <li class="nav-item" id="nav_func">
                  <a href="./telaCadastroFunc.html" class="nav-link">
                      <!--Imagem do ICONE DE ADICIONAR -->
                      <span class="icone"> <i class="uil uil-user-plus"></i> </span>
                      <span class="titulo"> Funcionario</span>
                  </a>
              </li>
              <!-- </div> -->
              <li class="nav-item" >
                  <a href="configuracoes.html" class="nav-link">
                      <!-- Imagem do ICONE DE CONFIGURAÇÕES -->
                      <span class="icone"><i class="uil uil-cog"></i></span>
                      <span class="titulo"> Configurações</span>
                  </a>
              </li>
              <li class="nav-item">
                  <a href="" class="nav-link">
                      <!-- Imagem do ICONE DE SUPORTE -->
                      <span class="icone"><i class="uil uil-comment-question"></i>
                      </span>
                      <span class="titulo"> Suporte</span>
                  </a>
              </li>
              <li class="nav-item">
                  <a href="./index.html" class="nav-link">
                      <!-- Botão de Sair  -->
                      <span class="icone"><i class="uil uil-signout"></i> </span>
                      <span class="titulo"> Sair </span>
                  </a>
              </li>
          </ul>
      </div>

    <!-- Seção das configs -->
    <main>
    <section class="container">
      <div class="config-titulo">
        <h1>Configurações</h1>
      </div>
      <div class="div_info">
        <div id="div_user" class="info_usuario">
          <div id="div_content_user" class="div_content">
            <h4 class="titulo-info">Email</h4>
            <h4 class="info">Email: <span id="span_user"></span></h4>
          </div>
          <button onclick="alterar_user()" id="btn_edit_user" class="btn_edit">
            Editar
          </button>
        </div>
        <div id="div_content_pass" class="info_email">
          <div class="div_content">
            <h4 class="titulo-info">Senha</h4>
            <h4 class="info">Senha: <span id="span_senha"></span></h4>
          </div>
          <button onclick="alterar_senha()" id="btn_edit_pass" class="btn_edit">
            Editar
          </button>
        </div>
        <div id="div_content_telefone" class="info_email">
          <div class="div_content">
            <h4 class="titulo-info">Telefone</h4>
            <h4 class="info">telefone: <span id="span_telefone"></span></h4>
          </div>
          <button onclick="alterar_telefone()" id="btn_edit_telefone" class="btn_edit">
            Editar
          </button>
        </div>
      </div>
      <div class="div_senha_logout">
        <button onclick="logout()" class="btn_logout">Sair</button>
      </div>
    </section>
  </main>
  <footer>
    <!--Espaço vazio no fim do dashboard-->
    <div class="footer-space"></div>
</footer>
</body>

</html>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.10.1/dist/sweetalert2.all.min.js"></script>

<script src="./js/perfil-validacao.js"></script>
<script src="./js/configs.js"></script>
<script>

  function dadosCliente() {
      fetch(`/usuarios/dados/${sessionStorage.ID_USUARIO}`, {
        method: "GET",
        headers: {
          "Content-Type": "application/json",
        },
      })
        .then(function (resposta) {
          if (resposta.ok) {
            resposta.json().then((json) => {
              console.log(json);
              get = (json)
              
              //username do Usuario
              var email_usuario = get[0].email;
              span_user.innerHTML = email_usuario;

              //senha do usuario

              var tamanhoSenha = atob(get[0].senha)
              var visualSenha = ""

              for(var a = 0; a < tamanhoSenha.length ; a++) {
                visualSenha += '*'
              }

              var senha_usuario = atob(get[0].senha);
              span_senha.innerHTML = visualSenha;

              //telefone do usuario

              var telefone_usuario = get[0].tel;
              span_telefone.innerHTML = telefone_usuario;
              
            });
          }
        })
        .catch(function (resposta){
          console.log(`#ERRO: ${resposta}`);
        });
      
    }

</script>